import{a as m}from"./chunk-FFNTSLFQ.js";import{S as r,T as d,c as u,e as o,h as s,i as a,k as c}from"./chunk-MBWRPWEI.js";var h=class p{constructor(e,n){this.http=e;this.usersService=n;this.usersService.userSubject.subscribe(t=>this.user=t)}morningMenu=new u(null);menu=new u(null);drinks=new u(null);user=null;URL="https://ezaszpkcccegxlhbcgpw.supabase.co";APIkey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV6YXN6cGtjY2NlZ3hsaGJjZ3B3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4NzI5MjEsImV4cCI6MjA3MTQ0ODkyMX0.CIVNnI1ZULLwVXUDhbyXajo8H32sPyXdriSqUcEyUNY";getMenus(){let e=new r({apikey:this.APIkey,Authorization:`Bearer ${this.APIkey}`,"Content-Type":"application/json"});return this.http.get(`${this.URL}/rest/v1/menu_products?select=id,name,image,description,price,menu_type(menu_type),product_type(product_type)`,{headers:e}).pipe(o(n=>n.map(t=>({id:t.id,image:t.image,name:t.name,description:t.description,menu_type:t.menu_type.menu_type,product_type:t.product_type.product_type,price:t.price}))),s(n=>{this.populateMorningMenu(n),this.populateMenu(n),this.populateDrinks(n)}))}populateMorningMenu(e){let n=[];e.forEach(t=>{t.menu_type==="morning"&&n.push(t),this.morningMenu.next(n)})}populateMenu(e){let n=[];e.forEach(t=>{t.menu_type==="menu"&&n.push(t),this.menu.next(n)})}populateDrinks(e){let n=[];e.forEach(t=>{t.menu_type==="drinks"&&n.push(t),this.drinks.next(n)})}addProduct(e){let n=this.convertProduct(e),t=new r({apikey:this.APIkey,Authorization:`Bearer ${this.user?.access_token}`,"Content-Type":"application/json"});return this.http.post(`${this.URL}/rest/v1/menu_products`,n,{headers:t}).pipe(s(()=>this.getMenus().subscribe()))}convertProduct(e){switch(e.menu_type){case"morning":e.menu_type=1;break;case"menu":e.menu_type=2;break;case"drinks":e.menu_type=3;break}switch(e.product_type){case"salad":e.product_type=1;break;case"food":e.product_type=2;break;case"desert":e.product_type=3;break;case"cocktail":e.product_type=4;break;case"cold_drink":e.product_type=5;break;case"hot_drink":e.product_type=6;break}return{image:e.image,name:e.name,description:e.description,menu_type:e.menu_type,product_type:e.product_type,price:e.price}}deleteProduct(e){let n=new r({apikey:this.APIkey,Authorization:`Bearer ${this.user?.access_token}`,"Content-Type":"application/json"});return this.http.delete(`${this.URL}/rest/v1/menu_products?id=eq.${e}`,{headers:n}).pipe(s(t=>{t?this.getMenus().subscribe():alert("Feature currently disabled as this page is used for demonstration purposes!")}))}getSpecificProduct(e){let n=new r({apikey:this.APIkey,Authorization:`Bearer ${this.APIkey}`,"Content-Type":"application/json"});return this.http.get(`${this.URL}/rest/v1/menu_products?select=id,name,image,description,price,menu_type(menu_type),product_type(product_type)&id=eq.${e}`,{headers:n}).pipe(o(t=>{let i=t[0];return{id:i.id,image:i.image,name:i.name,description:i.description,menu_type:i.menu_type.menu_type,product_type:i.product_type.product_type,price:i.price}}))}editProduct(e,n){let t=this.convertProduct(e),i=new r({apikey:this.APIkey,Authorization:`Bearer ${this.user?.access_token}`,"Content-Type":"application/json"});return this.http.patch(`${this.URL}/rest/v1/menu_products?id=eq.${n}`,t,{headers:i}).pipe(s(y=>{y?this.getMenus().subscribe():alert("Feature currently disabled as this page is used for demonstration purposes!")}))}static \u0275fac=function(n){return new(n||p)(c(d),c(m))};static \u0275prov=a({token:p,factory:p.\u0275fac,providedIn:"root"})};export{h as a};
